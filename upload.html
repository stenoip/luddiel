<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>LÃ»ddiel â€” Upload</title>
Â  <style>
Â  Â  :root{--bg:#0e0f12;--elev-1:#14161b;--elev-2:#1a1d23;--card:#161921;--border:#232733;--text:#e6e8ee;--muted:#aab1c3;--brand:#7b5cff;--brand-2:#5fe1d6;--accent:#ff7ab6;--success:#52d67a;--warning:#ffc857;--danger:#ff6b6b;--shadow:0 8px 24px rgba(0,0,0,.25), 0 2px 6px rgba(0,0,0,.2);--radius:16px;--radius-sm:12px;--radius-xs:10px;--gap:18px;--gap-sm:12px;--gap-lg:24px;}*{box-sizing:border-box}html,body{height:100%}body{margin:0;background:radial-gradient(1200px 800px at -10% -10%,rgba(123,92,255,.18),transparent 40%),radial-gradient(1000px 700px at 110% -20%,rgba(95,225,214,.15),transparent 40%),var(--bg);color:var(--text);font: 15px/1.5 ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";letter-spacing:.2px;}a{color:inherit;text-decoration:none}button{font:inherit}.topbar{position:sticky; top:0; z-index:50;backdrop-filter: blur(10px);background: linear-gradient(to bottom, rgba(14,15,18,.85), rgba(14,15,18,.6));border-bottom:1px solid var(--border);}.topbar-inner{display:flex; align-items:center; gap:12px;max-width:1200px; margin:0 auto; padding:14px 18px;}.brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.5px;background: linear-gradient(135deg, var(--brand), var(--brand-2));-webkit-background-clip:text; background-clip:text; color:transparent;font-size:22px;}.brand-badge{width:30px; height:30px; border-radius:10px;background: conic-gradient(from 200deg, var(--brand), var(--brand-2), var(--accent));box-shadow:0 0 0 2px rgba(255,255,255,.06), 0 8px 18px rgba(0,0,0,.35) inset;display:grid; place-items:center; color:white; font-size:14px; font-weight:900;}.search{flex:1; display:flex; align-items:center; gap:8px;background: var(--elev-2); border:1px solid var(--border);padding:8px 12px; border-radius:999px;}.search input{flex:1; background:transparent; border:none; outline:none; color:var(--text);}.pill{display:inline-flex; align-items:center; gap:8px;padding:9px 14px; border-radius:999px; border:1px solid var(--border);background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.0));color:var(--text); cursor:pointer;transition: transform .05s ease, background .2s ease, border-color .2s ease;}.pill:hover{transform: translateY(-1px); border-color:#2e3444}.pill.primary{background: linear-gradient(135deg, rgba(123,92,255,.25), rgba(95,225,214,.22));border-color: transparent;}.file-input{display:none}.avatar{width:34px; height:34px; border-radius:50%;background: linear-gradient(135deg, #2b2f3b, #232735);border:1px solid var(--border);display:grid; place-items:center; font-weight:700; color:#c9cee1; font-size:12px;}.container{max-width:1200px; margin:20px auto; padding:0 18px;display:grid; grid-template-columns:260px minmax(0,1fr) 320px; gap:var(--gap);}.card{background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.0));border:1px solid var(--border); border-radius:var(--radius);box-shadow: var(--shadow);}.section{padding:16px}.sidebar .item{display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:12px; color:var(--text);border:1px solid transparent;}.sidebar .item:hover{background:var(--elev-2); border-color:var(--border)}.sidebar h3{color:#d6daea; font-size:14px; font-weight:800; letter-spacing:.4px;margin:6px 12px 8px;text-transform:uppercase;}.muted{color:var(--muted)}.tag{display:inline-flex; align-items:center; gap:8px;padding:6px 10px; border-radius:999px; border:1px solid var(--border);color:#d8dcef; background: #151823;font-size:12px;}.tag .dot{width:8px; height:8px; border-radius:50%;background: linear-gradient(135deg, var(--brand), var(--brand-2));box-shadow:0 0 0 2px rgba(123,92,255,.15);}.composer{padding:16px}.composer .row{display:flex; align-items:center; gap:12px; margin-bottom:12px;}.composer textarea{width:100%; min-height:70px; resize:vertical;background:#141823; color:var(--text); border:1px solid var(--border);border-radius:12px; padding:12px;}.chip{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px;border:1px dashed #2a3141; background:#161b26; color:#cdd3e6;}.post{padding:16px; display:flex; flex-direction:column; gap:12px}.post + .post{border-top:1px solid var(--border)}.post-head{display:flex; align-items:center; gap:12px}.post-head .who{display:flex; flex-direction:column}.post-head .name{font-weight:800}.post-head .meta{font-size:12px; color:var(--muted)}.post-audio{background: linear-gradient(180deg, #141824, #121522);border:1px solid var(--border); border-radius:14px; padding:12px;}.post-audio .title{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px;}.wave{height:44px; border-radius:10px; overflow:hidden; border:1px solid #263046;background:repeating-linear-gradient(90deg, rgba(95,225,214,.15) 0 2px, transparent 2px 6px),linear-gradient(135deg, rgba(123,92,255,.25), rgba(95,225,214,.18));}audio{width:100%; margin-top:10px; filter: saturate(1.1) hue-rotate(-5deg)}.actions{display:flex; align-items:center; gap:10px; flex-wrap:wrap}.btn{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px;border:1px solid var(--border); background:#141823; color:#dbe0f3; cursor:pointer;}.btn:hover{border-color:#2f3a54}.btn.ghost{background:transparent}.stat{font-size:12px; color:var(--muted)}.list{display:flex; flex-direction:column; gap:10px}.creator{display:flex; align-items:center; justify-content:space-between; gap:10px;padding:10px; border:1px solid var(--border); border-radius:12px; background:#151a25;}.creator .left{display:flex; align-items:center; gap:10px}.mini{width:28px; height:28px; border-radius:50%; background:linear-gradient(135deg,#2b2f3b,#232735); border:1px solid var(--border); display:grid; place-items:center; font-size:11px; color:#c9cee1; font-weight:700}.status{ text-align:center; color:var(--muted); margin:10px 0 16px; }.error{ color: var(--danger); }.audio-post{background: linear-gradient(180deg, #141824, #121522);border:1px solid var(--border);border-radius:14px;padding:14px;margin:14px 0;box-shadow: var(--shadow);}.audio-post .meta{ font-size:12px; color:var(--muted); margin-bottom:8px; }footer{max-width:1200px; margin:30px auto; padding:0 18px 40px; color:var(--muted); font-size:13px}@media (max-width: 1100px){.container{grid-template-columns:240px minmax(0,1fr)}.right{display:none}}@media (max-width: 780px){.container{grid-template-columns:1fr}.left{display:none}.topbar-inner{gap:10px}.search{display:none}}
Â  </style>
</head>
<body>
Â  <header class="topbar" role="banner">
Â  Â  <div class="topbar-inner">
Â  Â  Â  <div class="brand" aria-label="LÃ»ddiel home">
Â  Â  Â  Â  <span class="brand-badge">â™ª</span> LÃ»ddiel
Â  Â  Â  </div>
Â  Â  Â  <form class="search" role="search" aria-label="Search sounds">
Â  Â  Â  Â  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.2-4.2M10.8 18a7.2 7.2 0 1 1 0-14.4 7.2 7.2 0 0 1 0 14.4Z" stroke="#aab1c3" stroke-width="1.6" stroke-linecap="round"/></svg>
Â  Â  Â  Â  <input type="search" placeholder="Search audio, creators, tagsâ€¦" aria-label="Search input" />
Â  Â  Â  </form>
Â  Â  Â  <a href="upload.html" class="pill primary" title="Upload audio">
Â  Â  Â  Â  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 16V4m0 0l4 4m-4-4L8 8M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2" stroke="#e6e8ee" stroke-width="1.6" stroke-linecap="round"/></svg>
Â  Â  Â  Â  Upload
Â  Â  Â  </a>
Â  Â  Â  <div class="avatar" title="You">YO</div>
Â  Â  </div>
Â  </header>

Â  <main class="container" role="main">
Â  Â  <aside class="left sidebar">
Â  Â  Â  <div class="card section">
Â  Â  Â  Â  <h3>Menu</h3>
Â  Â  Â  Â  <a class="item" href="index.html"><span>ğŸ </span> <span>Home</span></a>
Â  Â  Â  Â  <a class="item" href="#"><span>ğŸ”</span> <span>Discover</span></a>
Â  Â  Â  Â  <a class="item" href="following.html"><span>ğŸ§</span> <span>Following</span></a>
Â  Â  Â  Â  <a class="item" href="playlists.html"><span>ğŸ“»</span> <span>Playlists</span></a>
Â  Â  Â  Â  <a class="item" href="upload.html"><span>â¬†ï¸</span> <span>Upload</span></a>
Â  Â  Â  </div>
Â  Â  </aside>

Â  Â  <section aria-label="Upload" class="feed">
Â  Â  Â  <h2>Upload Audio</h2>
Â  Â  Â  <div class="card section" style="padding:24px">
Â  Â  Â  Â  <p id="status" class="status muted" style="margin-top:0">Choose a file or record your voice.</p>
Â  Â  Â  Â  <form id="uploadForm" action="/upload" method="post" enctype="multipart/form-data">
Â  Â  Â  Â  Â  <div class="composer">
Â  Â  Â  Â  Â  Â  <div class="row" style="margin-bottom:0">
Â  Â  Â  Â  Â  Â  Â  <label class="pill">
Â  Â  Â  Â  Â  Â  Â  Â  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M16 12H8m4-4v8m8 4H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2Z" stroke="#e6e8ee" stroke-width="1.6" stroke-linecap="round"/></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Choose File
Â  Â  Â  Â  Â  Â  Â  Â  <input class="file-input" type="file" name="audio" accept="audio/*">
Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  <p class="muted" style="margin:0 0 0 12px">or</p>
Â  Â  Â  Â  Â  Â  Â  <button type="button" id="recordBtn" class="pill">
Â  Â  Â  Â  Â  Â  Â  Â  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z" stroke="#e6e8ee" stroke-width="1.6" stroke-linecap="round"/><path d="M12 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill="#e6e8ee"/></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Record Audio
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="row" style="margin-top:12px">
Â  Â  Â  Â  Â  Â  Â  <audio id="recordedAudio" controls style="display:none"></audio>
Â  Â  Â  Â  Â  Â  Â  <button type="button" id="stopBtn" class="pill danger" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z" stroke="#e6e8ee" stroke-width="1.6" stroke-linecap="round"/><path d="M12 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill="#e6e8ee"/></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Stop Recording
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="row">
Â  Â  Â  Â  Â  Â  Â  <input type="text" name="sender" placeholder="Your name" style="flex:1; padding:10px 14px; border-radius:10px; border:1px solid var(--border); background:var(--elev-2); color:var(--text); outline:none;">
Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="pill primary">
Â  Â  Â  Â  Â  Â  Â  Â  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2m-8-9v9m-4-4l4 4 4-4" stroke="#e6e8ee" stroke-width="1.6" stroke-linecap="round"/></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Share
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </form>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  <aside class="right sidebar">
Â  Â  Â  <div class="card section">
Â  Â  Â  Â  <h3>Top creators</h3>
Â  Â  Â  Â  <div class="list">
Â  Â  Â  Â  Â  <p class="muted">No creators yet. Be the first to share!</p>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <div class="card section" style="margin-top:var(--gap)">
Â  Â  Â  Â  <h3>Discover playlists</h3>
Â  Â  Â  Â  <div class="list">
Â  Â  Â  Â  Â  <p class="muted">No playlists yet.</p>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </aside>
Â  </main>

Â  <footer>
Â  Â  <div>LÃ»ddiel â€” share what you hear.</div>
Â  Â  <div class="muted" style="margin-top:6px">Waiting for your first postâ€¦</div>
Â  </footer>

Â  <script>
Â  Â  // Update with your Codespaces public URL
Â  Â  const API_BASE = 'https://studious-space-engine-694w59x5p7r9354xv-3000.app.github.dev';
Â  Â Â 
Â  Â  const form = document.getElementById('uploadForm');
Â  Â  const statusEl = document.getElementById('status');
Â  Â  const recordBtn = document.getElementById('recordBtn');
Â  Â  const stopBtn = document.getElementById('stopBtn');
Â  Â  const recordedAudio = document.getElementById('recordedAudio');
Â  Â  const fileInput = form.querySelector('input[type="file"]');
Â  Â  const senderInput = form.querySelector('input[name="sender"]');

Â  Â  let mediaRecorder;
Â  Â  let recordedChunks = [];

Â  Â  function setStatus(msg, isError = false) {
Â  Â  Â  statusEl.textContent = msg || '';
Â  Â  Â  statusEl.className = 'status' + (isError ? ' error' : '');
Â  Â  }

Â  Â  form.addEventListener('submit', async (e) => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  setStatus('Uploading...');

Â  Â  Â  const formData = new FormData();
Â  Â  Â  formData.append('sender', senderInput.value || 'Anonymous');

Â  Â  Â  if (fileInput.files.length > 0) {
Â  Â  Â  Â  formData.append('audio', fileInput.files[0]);
Â  Â  Â  } else if (recordedChunks.length > 0) {
Â  Â  Â  Â  const blob = new Blob(recordedChunks, { type: 'audio/webm' });
Â  Â  Â  Â  formData.append('audio', blob, 'recording.webm');
Â  Â  Â  } else {
Â  Â  Â  Â  setStatus('Please select or record an audio file.', true);
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch(`${API_BASE}/api/upload`, {
Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  body: formData
Â  Â  Â  Â  });
Â  Â  Â  Â  if (!res.ok) throw new Error(`Upload failed: ${res.status}`);
Â  Â  Â  Â  await res.json();
Â  Â  Â  Â  form.reset();
Â  Â  Â  Â  recordedChunks = [];
Â  Â  Â  Â  recordedAudio.style.display = 'none';
Â  Â  Â  Â  setStatus('Uploaded! Redirecting to home...', false);
Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  window.location.href = 'index.html';
Â  Â  Â  Â  }, 1500);
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  console.error(err);
Â  Â  Â  Â  setStatus('Upload failed. Ensure the backend is public and CORS allows this origin.', true);
Â  Â  Â  }
Â  Â  });

Â  Â  recordBtn.addEventListener('click', async () => {
Â  Â  Â  try {
Â  Â  Â  Â  const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
Â  Â  Â  Â  mediaRecorder = new MediaRecorder(stream);
Â  Â  Â  Â  recordedChunks = [];

Â  Â  Â  Â  mediaRecorder.ondataavailable = e => {
Â  Â  Â  Â  Â  if (e.data.size > 0) recordedChunks.push(e.data);
Â  Â  Â  Â  };

Â  Â  Â  Â  mediaRecorder.onstop = () => {
Â  Â  Â  Â  Â  const blob = new Blob(recordedChunks, { type: 'audio/webm' });
Â  Â  Â  Â  Â  recordedAudio.src = URL.createObjectURL(blob);
Â  Â  Â  Â  Â  recordedAudio.style.display = 'block';
Â  Â  Â  Â  Â  fileInput.disabled = true;
Â  Â  Â  Â  Â  stream.getTracks().forEach(track => track.stop());
Â  Â  Â  Â  };

Â  Â  Â  Â  mediaRecorder.start();
Â  Â  Â  Â  recordBtn.disabled = true;
Â  Â  Â  Â  stopBtn.disabled = false;
Â  Â  Â  Â  setStatus('Recording...', false);
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  console.error(err);
Â  Â  Â  Â  setStatus('Microphone unavailable. Use a file upload instead.', true);
Â  Â  Â  }
Â  Â  });

Â  Â  stopBtn.addEventListener('click', () => {
Â  Â  Â  if (mediaRecorder && mediaRecorder.state !== 'inactive') {
Â  Â  Â  Â  mediaRecorder.stop();
Â  Â  Â  }
Â  Â  Â  recordBtn.disabled = false;
Â  Â  Â  stopBtn.disabled = true;
Â  Â  Â  setStatus('Recording stopped. Ready to share.');
Â  Â  });

Â  Â  fileInput.addEventListener('change', () => {
Â  Â  Â  if (fileInput.files.length > 0) {
Â  Â  Â  Â  recordBtn.disabled = true;
Â  Â  Â  Â  stopBtn.disabled = true;
Â  Â  Â  Â  recordedAudio.style.display = 'none';
Â  Â  Â  Â  setStatus('File selected. Ready to share.');
Â  Â  Â  } else {
Â  Â  Â  Â  recordBtn.disabled = false;
Â  Â  Â  Â  setStatus('');
Â  Â  Â  }
Â  Â  });
Â  </script>
</body>
</html>
